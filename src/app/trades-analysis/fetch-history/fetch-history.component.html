<mat-divider></mat-divider>
  <mat-card-header>
    <mat-card-title>Fetch History</mat-card-title>
  </mat-card-header>
  <div class="flex-row" *ngIf="fetchHistory && fetchHistory.length > 0">
    <mat-card *ngFor="let fetch of fetchHistory; let i = index" [attr.data-index]="i">
      <mat-card-header>
        <mat-card-title>
          <span [ngClass]="fetch.isBuyerWinner ? 'buy' : 'accent'">{{fetch.symbol.asset1+'/'+fetch.symbol.asset2}}</span>
        </mat-card-title>
        <mat-card-subtitle matTooltip="Time fetched">
          {{fetch.timeFetched | date:'medium'}}
        </mat-card-subtitle>
        <mat-card-subtitle matTooltip="Actual look back">
          {{fetch.lookBack | hms}}
        </mat-card-subtitle>
      </mat-card-header>
      <mat-card-content>
        <h4 matTooltip="Buy/Sell">Volume</h4>
        <div class="volume-container">
          <!-- 100 * (fetch.buyerQtyTotal - fetchHistory[i+1].buyerQtyTotal) / ((fetch.buyerQtyTotal + fetchHistory[i+1].buyerQtyTotal) / 2) -->
          <span>{{fetch.buyerQtyTotalFormatted}}</span>&nbsp;
          <div *ngIf="fetchHistory[i+1]">
            <span class="buy" *ngIf="fetch.buyerQtyTotal === fetchHistory[i+1].buyerQtyTotal"
                  matTooltip="No change in buy vol"> &#9644; </span>
            <span class="buy" *ngIf="fetch.buyerQtyTotal > fetchHistory[i+1].buyerQtyTotal"
                  matTooltip="Buy vol increased"> &#9650; {{(100 * ((fetch.buyerQtyTotal - fetchHistory[i+1].buyerQtyTotal) / ((fetch.buyerQtyTotal + fetchHistory[i+1].buyerQtyTotal) / 2))).toFixed(2) }}%</span>
            <span class="accent" *ngIf="fetch.buyerQtyTotal < fetchHistory[i+1].buyerQtyTotal"
                  matTooltip="Buy vol decreased"> &#9660; {{(100 * ((fetch.buyerQtyTotal - fetchHistory[i+1].buyerQtyTotal) / ((fetch.buyerQtyTotal + fetchHistory[i+1].buyerQtyTotal) / 2))).toFixed(2) }}%</span>
          </div>
        </div>
        <div class="volume-container">
          <span>{{fetch.sellerQtyTotalFormatted}}</span>&nbsp;
          <div *ngIf="fetchHistory[i+1]">
            <span class="accent" *ngIf="fetch.sellerQtyTotal == fetchHistory[i+1].sellerQtyTotal"
                  matTooltip="No change in sell vol"> &#9644; </span>
            <span class="buy" *ngIf="fetch.sellerQtyTotal > fetchHistory[i+1].sellerQtyTotal"
                  matTooltip="Sell vol increased"> &#9650; {{(100 * ((fetch.sellerQtyTotal - fetchHistory[i+1].sellerQtyTotal) / ((fetch.sellerQtyTotal + fetchHistory[i+1].sellerQtyTotal) / 2))).toFixed(2) }}%</span>
            <span class="accent" *ngIf="fetch.sellerQtyTotal < fetchHistory[i+1].sellerQtyTotal"
                  matTooltip="Sell vol decreased"> &#9660; {{(100 * ((fetch.sellerQtyTotal - fetchHistory[i+1].sellerQtyTotal) / ((fetch.sellerQtyTotal + fetchHistory[i+1].sellerQtyTotal) / 2))).toFixed(2) }}%</span>
          </div>
        </div>
      </mat-card-content>
    </mat-card>
  </div>
  <mat-card-content *ngIf="!fetchHistory || fetchHistory.length <= 0">
    No fetch history found!
  </mat-card-content>
